import React from 'react'
import useFetch from './08/useFetch'
function App() {
      const {request, data , loading, error} = useFetch()
      const [produto, setProduto] = React.useState('')
      
      function handleClick({target}){
            setProduto(target.innerText)
      }

      React.useEffect(()=>{
            async function fetchData(){
                  const {response,json}= await request(`https://ranekapi.origamid.dev/json/api/produto/`)
                  console.log(response, json)
            }

            fetchData() 
      },[request])

 
      if(error) return <p>{error}</p>
      if(loading)  return <p>Carregando...</p>
      if(data) 
            return(
            <>            
                  <button onClick={handleClick}>notebook</button>
                  <button onClick={handleClick}>Smartphone</button>
                  <p>{produto}</p>

                  {data.map(item=>
                        <ul key={item.id}>
                              <li>{item.nome}</li>
                        </ul>         
                  )}

                
            </>
            )
      else return null
     
}

export default App